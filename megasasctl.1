.\" Text automatically generated by txt2man
.TH megasasctl 1 "03 March 2024" ""
.SH NAME
megasasctl \- diagnostics on megaraid adapters and attached disks.
.SH SYNOPSIS
megasasctl [\fB-vest\fP] [\fB-H\fP] [\fB-l\fP log-page-nr] [\fB-T\fP long|short] [target \.\.\.]
.PP
Reports diagnostics on megaraid adapters and attached disks. Permits
dumping of controller log pages for inspection of error, temperature,
and self-test conditions, initiates self-test diagnostics, and documents
adapter and logical drive configuration. Target devices may be adapters,
(e.g. a0), enclosures (e.g. a0e0), or individual disks (e.g. a0e0s0). If
no target is specified, reports configuration and drive state on all
adapters. If a target matches a collection of disks, operations are
applied to all matching devices. Options are:
.TP
.B
\fB-v\fP
Increase program verbosity.
.TP
.B
\fB-e\fP
Dump read (0x03), write (0x02), and verify (0x05) error log
pages.
.TP
.B
\fB-s\fP
Dump self-test (0x10) log page.
.TP
.B
\fB-t\fP
Dump temperature (0x0d) log page.
.TP
.B
\fB-l\fP page
Dump the specified log page. Log page 0 documents the log pages
the device supports.
.TP
.B
\fB-p\fP
Do not report physical disks. Reports only adapters and logical
drives. Useful for concisely documenting adapter configuration.
.TP
.B
\fB-T\fP test
Initiate the background short or long self-test procedure. The
test may take up to an hour to complete, but does not inhibit
access to the device. The test may be monitored using the \fB-s\fP
option.
.TP
.B
\fB-H\fP
Perform an adapter health check. Inspects state of all logical
and physical drives and battery backup unit and reports problem
conditions. If all is well, generates no output. Useful in a
cron job.
.TP
.B
\fB-B\fP
When performing health check, do not treat battery problems as
failures.
.TP
.B
\fB-V\fP
Show version.
.PP
N.B. The background long self test is a useful tool for diagnosing
problems with individual disks. But be cautious with program usage.
"megasasctl \fB-T\fP long" with no targets will initiate a background long self
test on every drive on every adapter. This may not be what you want.
.PP
By default, the health check option inspects log pages 0x02, 0x03, and
0x05 for uncorrected read, write, and verify errors, 0x0d for excess
temperature conditions, and 0x10 for failed self tests. If, however, any
of the log page options is specified, only the designated log pages are
inspected.
.PP
This program requires the device file /dev/megaraid_sas_ioctl_node to be
present on the system. If your system does not have this device file,
you may create it either by executing LSI's "MegaCli" program once,
or by locating the megadev_sas_ioctl entry in /proc/devices and creating
/dev/megaraid_sas_ioctl_node as a character device with suitable
permissions with a matching major device number and a minor number of 0.
